<div [ngClass]="{'mainContainerDirectMessageOwnMessage': userIdMatchesWithIdFromLoggedinUser(), 
    'mainContainerDirectMessageFromOtherUser': !userIdMatchesWithIdFromLoggedinUser()}"
    (mouseleave)="closeMenuMoreOptionIfHoverOutside()">

    @if (noProfileImgExistInMessage()) {
    <img class="imgNoSelectedProfile" src="assets/img/non-user-selected.svg" alt="Profile Image">
    }@else {
    <img src="{{ directMessage.userThatSendedMessage?.imgUrl }}" alt="Profile Image">
    }


    <div>

        <div [ngClass]="{'containerDirectMessageUpperPartOwnMessage': userIdMatchesWithIdFromLoggedinUser(), 
            'containerDirectMessageUpperPartFromOtherUser': !userIdMatchesWithIdFromLoggedinUser()}">

            <p>
                {{ directMessage.userThatSendedMessage?.name }}
            </p>

            <p>{{ directMessage.senderTime | date: 'HH:mm' }} Uhr</p>

        </div>


        @if (!messageIsInEditMode) {
        <p [ngClass]="{'messageTextOwnMessage': userIdMatchesWithIdFromLoggedinUser(), 
            'messageTextFromOtherUser': !userIdMatchesWithIdFromLoggedinUser()}">
            {{ directMessage.messageText }}
        </p>
        }


        <!--------------------------------- Inputfield to Edit Message --------------------------------->
        @if (messageIsInEditMode) {
        <form [formGroup]="editMessageForm" (ngSubmit)="editMessage()">
            <input type="text" placeholder="{{ directMessage.messageText }}" formControlName="inputfieldEditMessage">

            <div class="containerIcons">
                <button type="submit" [disabled]="editMessageForm.invalid">
                    <img src="assets/icons/check-icon.svg" alt="Check Icon"
                        [ngClass]="{'disabledBtn': editMessageForm.invalid}">
                </button>
                |
                <button type="button">
                    <img src="assets/icons/close-icon.svg" alt="Close Icon" (click)="closeEditModeFromMessage()">
                </button>
            </div>
        </form>
        }
        <!--------------------------------- Inputfield to Edit Message --------------------------------->


        <div class="containerDirectMessageLowerPart">
            <p>2 Answers</p>
            <p>Last Answer 12:55 Uhr</p>
        </div>
    </div>


    <!--------------------------------- Reaction Bar --------------------------------->
    <div [ngClass]="{'containerReactionBarRightSide':  userIdMatchesWithIdFromLoggedinUser(), 
        'containerReactionBarLeftSide': !userIdMatchesWithIdFromLoggedinUser()}" class="containerReactionBar">

        <img class="singleIcon" src="assets/icons/check-emoji-icon.svg" alt="Check Icon">
        <img class="singleIcon" src="assets/icons/raising-both-hands-emoji-icon.svg" alt="Raising both Hands Icon">

        <div class="containerSingleIcon">
            <img src="assets/icons/add-emojis-icon.svg" alt="Add Emoji Icon">
        </div>

        <div class="containerSingleIcon">
            <img src="assets/icons/open-thread-icon.svg" alt="Open Thread Icon">
        </div>

        @if (userIdMatchesWithIdFromLoggedinUser()) {
        <div class="containerSingleIcon" (click)="openMenuMoreOptions()">
            <img src="assets/icons/more-options-icon.svg" alt="More Options Icon">
        </div>
        }
    </div>
    <!--------------------------------- Reaction Bar --------------------------------->


    <!--------------------------------- Menu more Options --------------------------------->
    @if(menuMoreOptionsAreOpen) {
    <div class="containerMenuMoreOptions">
        <p (click)="openEditModeFromMessage()">Edit Message</p>
        <p>Delete Message</p>
    </div>
    }
    <!--------------------------------- Menu more Options --------------------------------->
</div>